---
title: 'WP 리비젼DB 지우기 : Python + mysql'
author: suapapa
type: post
date: 2009-08-11T00:52:18+00:00
url: /p=450
dsq_thread_id:
  - 725042660
aktt_notify_twitter:
  - no
translations:
  - 'a:1:{i:0;s:10428:"YToyOntzOjI6ImtvIjthOjI6e3M6MTA6InBvc3RfdGl0bGUiO3M6NDE6IldQIOumrOu5hOygvERCIOyngOyasOq4sCA6IFB5dGhvbiArIG15c3FsIjtzOjEyOiJwb3N0X2NvbnRlbnQiO3M6NDE1OToiPHA+7JuM65Oc7ZSE656Y7IqkIDIuNuuyhOygvCDrtoDthLDripQg66as67mE7KC86riw64ql7J20IOq4sOuzuOyggeycvOuhnCDstpTqsIDrkJjslrQg7J6I7Iq164uI64ukLjwvcD4NCjxwPuuzgOqyvSDrgrTsl63snYQg7KCA7J6l7ZWY64qUIOq4sOuKpeyduOuNsCwg7IKs7IukIOydtCDruJTroZzqt7jripQg6rCc7J24IOu4lOuhnOq3uOudvCDtlYTsmpQg7JeG64qUIOq4sOuKpeydtOyXkOyalC4gKOq3uOufsOydvOydgCDsnITtgqTqsIAg7J6YIO2VtOyjvOuLiOq5jOyalCk8L3A+DQo8cD7rmJAg7Y2867iU66as7ImsIOyghOyXkCDsnpDso7wg6rOg7LmY6rOgLCDtm4Tsl5Drj4Qg65iQIOqzoOy5mOqzoCDtlZjri6Trs7Tri4gg67O4IOuCtOyaqeyXkCDrqrvsp4Ag7JWK6rKMIOunjuydgCDsmqnrn4nsnYQg7IKs7Jqp7ZWY6rOgIOyeiOydhOqxsOudvCDsg53qsIHrkJjslrQg7IK07Y6067O07JWY7Iq164uI64ukLjwvcD4NCjxwPuydvOuLqCwgPHN0cm9uZz53cC1jb25maWcucGhwPC9zdHJvbmc+7JeQIOyVhOuemOydmCDshKTsoJXsnYQg7LaU6rCA7ZWY7JesOjwvcD4NCjxwcmUgbGFuZz1cXCZxdW90O3BocFxcJnF1b3Q7Pg0KZGVmaW5lKCZxdW90O1dQX1BPU1RfUkVWSVNJT05TJnF1b3Q7LCBmYWxzZSk7DQo8L3ByZT4NCjxwPuumrOu5hOygvCDquLDriqXsnYQg64GE66m0LCDslZ7snLzroZzripQg66as67mE7KC87J2EIOyMk+yVhOuRkOyngCDslYrqsowg65Cp64uI64ukLjwvcD4NCjxwPu2VmOyngOunjCDquLDsobTsl5Ag7KCA7J6l65CY7JeI642YIOumrOu5hOygvOuTpOydgCDqt7jrjIDroZwgRELsl5Ag64Ko7JWE7J6I7KOgLiDsp4Dsm4zrs7TqsqDsirXri4jri6QuPC9wPg0KPGJsb2NrcXVvdGU+DQo8cD7ri7nsl7DtnoghIC3slrjsoJzrk6Dsp4Ag66ed7LmgIOyImCDsnojsnLzrr4DroZwtIGRi67Cx7JeFIO2bhOyXkCDsp4Ttlontlanri4jri6QhPC9wPg0KPC9ibG9ja3F1b3RlPiA8IS0tbW9yZS0tPg0KPHA+6rGw7J2YIOuqqOuToCByZGJtc+uKlCA8YSBocmVmPVxcJnF1b3Q7aHR0cDovL2tvLndpa2lwZWRpYS5vcmcvd2lraS9TUUxcXCZxdW90Oz5zcWw8L2E+7J2EIOyCrOyaqe2VtCDsp4jsnZjrpbwg67O064K06rOgKHF1ZXJ5KSDqsrDqs7zrpbwg67Cb64qUIChyZXRyaXZlKSDsi53snLzroZwg7IKs7Jqp7ZWp64uI64ukLjwvcD4NCjxwPuqwhOuLqO2VnCBzcWwg66y47J2AIOqxsOydmCDsnpDsl7DslrQg6rCZ7J20IOq3uOuMgOuhnCDsnb3snYQg7IiYIOyeiOyKteuLiOuLpC4g6rCE64uo7ZWcIOyYiOygnDo8L3A+DQo8cHJlIGxhbmc9XFwmcXVvdDtzcWxcXCZxdW90Oz4NClNFTEVDVCBpZCBGUk9NIHdwX3Bvc3RzOw0KPC9wcmU+DQo8YmxvY2txdW90ZT4NCjxwPndwX3Bvc3RzIO2FjOydtOu4lOyXkOyEnCBpZCDtlYTrk5zrk6TsnYQg7ISg7YOd7ZW0KOyEnCDrs7Tsl6zspJgpLjwvcD4NCjwvYmxvY2txdW90ZT4NCjxwPuydtOygnCwg66as67mE7KC8IOuNsOydtO2EsOuTpOydgCB3cF9wb3N0cyDthYzsnbTruJTsl5DshJwg7KeA7JuMIOuztOqyoOyKteuLiOuLpC48L3A+DQo8cD7sobDquIgg7Ja066Ck7JuMIOyhjOyngOunjCwg7Jet7IucIOq3uOufreyggOufrSDsnb3snYQg7IiYIOyeiOyKteuLiOuLpDo8L3A+DQo8cHJlIGxhbmc9XFwmcXVvdDtzcWxcXCZxdW90Oz4NCkRFTEVURSBGUk9NIHdwX3Bvc3RzIFdIRVJFIHBvc3RfdHlwZSA9ICZxdW90O3JldmlzaW9uJnF1b3Q7Ow0KPC9wcmU+DQo8YmxvY2txdW90ZT4NCjxwPnBvc3RfdHlwZeydtCByZXZpc2lvbuyduCDqsoPrk6TsnYQgd3BfcG9zdHMg7YWM7J2067iU7JeQ7IScIOyngOybjC48L3A+DQo8L2Jsb2NrcXVvdGU+DQo8cD7snbQg7KCV64+E7JeQ7IScIOuQnOuLpOuptCDsoovqsqDsp4Drp4wgPGEgaHJlZj1cXCZxdW90O2h0dHA6Ly9jb2RleC53b3JkcHJlc3Mub3JnL0ZpbGU6V1BfMjdfZGJzRVJELnBuZ1xcJnF1b3Q7PkVSRDwvYT7rpbwg7IK07Y6067O066m0IO2PrOyKpO2KuCDslYTsnbTrlJTrpbwg7LC47KGw7ZWY64qUIO2FjOydtOu4lOydtCDrkZDqsJwg642UIOyeiOyKteuLiOuLpC4g7J20IOuRkCDthYzsnbTruJTrj4Qg7KCV66as7ZW07JW87KOgLjwvcD4NCjxwPuq3uOufrOuLiOq5jCDthYzsnbTruJTsnbQg7IS4IOqwnOqzoCwg6re4IOykkSB3cF9wb3N0c+2FjOydtOu4lOydhCDssLjsobDtlbTshJwg65GQIO2FjOydtOu4lOydhCDsoJXrpqztlZjrqbQg65CY64qU642wLi4uPC9wPg0KPHA+7KCB64u57ZWcIHNxbOusuOydhCDsk7DquLAg7Ja066Ck7JuM7IScIOqygOyDieydhCDthrXtlbQg7LC+7JWE64OI7Iq164uI64ukLjwvcD4NCjxwPuyXreyLnCDsnpDsl7DsiqTrn73qsowg7J297J2ELi4uOjwvcD4NCjxwcmUgbGFuZz1cXCZxdW90O3NxbFxcJnF1b3Q7Pg0KREVMRVRFIGEsYixjDQpGUk9NIHdwX3Bvc3RzIGENCkxFRlQgSk9JTiB3cF90ZXJtX3JlbGF0aW9uc2hpcHMgYiBPTiAoYS5JRCA9IGIub2JqZWN0X2lkKQ0KTEVGVCBKT0lOIHdwX3Bvc3RtZXRhIGMgT04gKGEuSUQgPSBjLnBvc3RfaWQpDQpXSEVSRSBhLnBvc3RfdHlwZSA9IFxcXCdyZXZpc2lvblxcXCcNCjwvcHJlPg0KPGJsb2NrcXVvdGU+DQo8cD7snbTqsbQg64+E7KCA7Z6IIOuquyDsnb3qsqDri6QhISDjhYHri4jjhZPrpqzrgpjjhZPrpqw8L3A+DQo8L2Jsb2NrcXVvdGU+DQo8cD7tlbTshJwsIOydtO2VtO2VoCDsiJgg7J6I64qUIHNxbOusuOuTpOydhCDqsIDsp4Dqs6Ag7YyM7J207I2s7Jy866GcIOyerCDqtazshLEg7ZW0IOu0heuLiOuLpC48L3A+DQo8cHJlIGxhbmc9XFwmcXVvdDtweXRob25cXCZxdW90Oz4NCiMhL3Vzci9iaW4vcHl0aG9uDQojLSotIGNvZGluZzogdXRmLTggLSotDQppbXBvcnQgTXlTUUxkYg0KDQpkYiA9IE15U1FMZGIuY29ubmVjdChkYj1cXFwnZGJfbmFtZVxcXCcsIHVzZXI9XFxcJ3VzZXJcXFwnLCBwYXNzd2Q9XFxcJ3Bhc3N3ZFxcXCcsIGhvc3Q9XFxcJ2xvY2FsaG9zdFxcXCcpDQpjID0gZGIuY3Vyc29yKCkNCg0KIyB0eXBl7J20IHJldmlzb27snbgg7Y+s7Iqk7Yq465OkIOyCreygnA0KYy5leGVjdXRlKFxcXCdERUxFVEUgRlJPTSB3cF9wb3N0cyBXSEVSRSBwb3N0X3R5cGUgPSAmcXVvdDtyZXZpc2lvbiZxdW90O1xcXCcpDQoNCiMg64Ko7JWE7J6I64qUIO2PrOyKpO2KuOuTpOydmCDslYTsnbTrlJTrpbwg66as7Iqk7Yq47JeQIHBvc3RJRHMg64u07J6QLg0KYy5leGVjdXRlKFxcXCdTRUxFQ1QgaWQgRlJPTSB3cF9wb3N0c1xcXCcpDQpsX3Bvc3QgPSBjLmZldGNoYWxsKCkNCnBvc3RJRHMgPSBtYXAobGFtYmRhIHg6IHhbMF0sIGxfcG9zdCkNCg0KIyB3cF9wb3N0bWV0YSDthYzsnbTruJTsl5DshJwg7J2066+47IKt7KCc65CcIO2PrOyKpO2KuCDslYTsnbTrlJTrpbwg6rCA7KeEIOyVhOydtO2FnOuTpCDsgq3soJwuDQpjLmV4ZWN1dGUoXFxcJ1NFTEVDVCBtZXRhX2lkLCBwb3N0X2lkIEZST00gd3BfcG9zdG1ldGFcXFwnKQ0KbF9tZXRhID0gYy5mZXRjaGFsbCgpDQpmb3IgbWlkLCBwaWQgaW4gbF9tZXRhOg0KICAgIGlmIG5vdCBwaWQgaW4gcG9zdElEczoNCiAgICAgICAgYy5leGVjdXRlKFxcXCdERUxFVEUgRlJPTSB3cF9wb3N0bWV0YSBXSEVSRSBtZXRhX2lkPSVkXFxcJyVtaWQpDQoNCiMgd3BfdGVybV9yZWxhdGlvbnNoaXBzIO2FjOydtOu4lOyXkOyEnCDsnbTrr7jsgq3soJzrkJwg7Y+s7Iqk7Yq4IOyVhOydtOuUlOulvCDqsIDsp4Qg7JWE7J207YWc65OkIOyCreygnC4NCnByaW50IGMuZXhlY3V0ZShcXFwnU0VMRUNUIG9iamVjdF9pZCBGUk9NIHdwX3Rlcm1fcmVsYXRpb25zaGlwc1xcXCcpDQpsX3Rlcm1zID0gYy5mZXRjaGFsbCgpDQpmb3Igb2lkIGluIGxfdGVybXM6DQogICAgb2lkID0gb2lkWzBdDQogICAgaWYgbm90IG9pZCBpbiBwb3N0SURzOg0KICAgICAgICBjLmV4ZWN1dGUoXFxcJ0RFTEVURSBGUk9NIHdwX3Rlcm1fcmVsYXRpb25zaGlwcyBXSEVSRSBvYmplY3RfaWQ9JWRcXFwnJW9pZCkNCg0KZGIuY2xvc2UoKQ0KPC9wcmU+DQo8cD7snbTsqr3snbQg7Zuo7JSsIOydtO2VtO2VmOq4sCDsoovrhKTsmpQuIOyhsOq4iCDquLjslrTsoYzsp4Drp4wuLi48L3A+DQo8cD7qt7jrpqzqs6AsIOuPjOugpCDrs7Tri4ggRELsmqnrn4nsnbQgNTAlIOyvpCDsoJXrpqzrkJjsl4jsirXri4jri6QuIOunjuydtOuPhCDsspjrrLXsspjrrLXqs6Ag7J6I7JeI64Sk7JqULiAtby07PC9wPiI7fXM6MjoiZW4iO2E6Mjp7czoxMDoicG9zdF90aXRsZSI7czo0MjoiQ2xlYW4gdXAgV1AgcmV2aXNpb24gZGF0YSA6IHB5dGhvbiArIG15c3FsIjtzOjEyOiJwb3N0X2NvbnRlbnQiO3M6MzQyOToiPHA+V2VsbCwgc2luY2UgV1AyLjYgdGhleSBoYXZlIHJldmlzaW9uIGZlYXR1cmUgYnkgZGVmYXVsdC48L3A+DQo8cD5UaGlzIGlzIGZvciBzYXZlIGNoYW5naW5nIGhpc3Rvcnkgb2YgcG9zdC4gYnV0IEkgbXkgY2FzZSAtY3V6IG9mIEkgYW0gb25seSBvbmUgd3JpdGVyIG9mIG15IGJsb2ctIEkgZG9uXFxcJ3QgbmVlZCBpdC48L3A+DQo8cD5JIG1vZGlmeSBteSBwb3N0IHNvIG1hbnkgdGltZSBiZWZvciBwdWJsaXNoIChhbmQgc29tZXRpbWUgZXZlbiBhZnRlciBwdWJsaXNoKS4gIEkgc2hvdWxkIGRpc2FibGUgcmV2aXNpb24gZmVhdHVyZS48L3A+DQo8cD5MZXRcXFwncyBkaXNhYmxlIGFuZCBjbGVhbiByZXNpdmlvbiBmZWF0dXJlLjwvcD4NCjxwPlN0ZXAgb25lOiBhZGQgZm9sbG93aW5nIHRvJm5ic3A7IDxzdHJvbmc+d3AtY29uZmlnLnBocDwvc3Ryb25nPiA6PC9wPg0KPHByZSBsYW5nPVxcJnF1b3Q7cGhwXFwmcXVvdDs+DQpkZWZpbmUoJnF1b3Q7V1BfUE9TVF9SRVZJU0lPTlMmcXVvdDssIGZhbHNlKTsNCjwvcHJlPg0KPHA+dGhpcyBtYWtlcyBubyBtb3JlIHNhdmUgcmV2aXNpb24gZGF0YS4gYnV0IGRvblxcXCd0IGRlbGV0ZSBleGlzdGluZyBkYXRhcyBpbiBEQi48L3A+DQo8cD51c2Ugc3FsIGNvbW1hbmQsIGRlbGV0ZSB0aGVzZSAtbm90IHVzZWQgYW55bW9yZS0gZGF0YXMuPC9wPg0KPGJsb2NrcXVvdGU+DQo8cD5XYXJuISEgdSBNVVNUIGJhY2t1cCBEQiBiZWZvcmUgdHJ5IHRoaXMuPC9wPg0KPC9ibG9ja3F1b3RlPiA8IS0tbW9yZS0tPg0KPHA+YWxtb3N0IGV2ZXJ5IFJEQk1TIHVzZSA8YSBocmVmPVxcJnF1b3Q7aHR0cDovL2tvLndpa2lwZWRpYS5vcmcvd2lraS9TUUxcXCZxdW90Oz5zcWw8L2E+IGxhbmd1YWdlLjwvcD4NCjxwPmEgc2ltcGxlIHNxbCBzdGF0ZW1lbnQgY2FuIHJlYWRlZCBqdXN0IGxpa2UgbmF0dXJhbCBsYW5ndWFnZTo8L3A+DQo8cHJlIGxhbmc9XFwmcXVvdDtzcWxcXCZxdW90Oz4NClNFTEVDVCBpZCBGUk9NIHdwX3Bvc3RzOw0KPC9wcmU+DQo8YmxvY2txdW90ZT4NCjxwPihzaG93IG1lKSBzZWxlY3Rpb24gb2YgPGVtPmlkPC9lbT4gKGZpZWxkKSBmcm9tIDxlbT53cF9wb3N0czwvZW0+ICh0YWJsZSk8L3A+DQo8L2Jsb2NrcXVvdGU+DQo8cD5PSywgbGV0XFxcJ3MgZGVsZXRlIHJldmlzb24gZGF0YXMgZnJvbSA8ZW0+d3BfcG9zdHM8L2VtPiB0YWJsZS48L3A+DQo8cD53ZWxsLCBpdCBsaXR0bGUgaGFyZGVyLCBidXQgY2FuIHJlYWQgLWxpa2UgbmF0dXJhbCBsYW5ndWFnZS0gYW55d2F5OjwvcD4NCjxwcmUgbGFuZz1cXCZxdW90O3NxbFxcJnF1b3Q7Pg0KREVMRVRFIEZST00gd3BfcG9zdHMgV0hFUkUgcG9zdF90eXBlID0gJnF1b3Q7cmV2aXNpb24mcXVvdDs7DQo8L3ByZT4NCjxibG9ja3F1b3RlPg0KPHA+ZGVsZXRlIChpdGVtcykgZnJvbSA8ZW0+d3BfcG9zdHM8L2VtPiB0YWJsZSB3aGljaCh3aGVyZSkgPGVtPnBvc3RfdHlwZTwvZW0+IGhhcyAmcXVvdDtyZXZpc2lvbiZxdW90OzwvcD4NCjwvYmxvY2txdW90ZT4NCjxwPmFuZCwgYmFkIG5ldywgdGhlcmUgciB0d28gbW9yZSB0YWJsZXMgdGhhdCBoYXZlIHRvIGNsZWFuIHVwLiB0aGV5IGhhdmUgc3Via2V5IHRoYXQgbGluayBwb3N0IGlkIChvZiB3cF9wb3N0cyk8L3A+DQo8cD5jdXogSVxcXCdtIG5vdCBhIERCQS4gYXNrIHRvIGdvb2dsZSBwcm9mZXIgc3FsIHN0YXRlbWVudCBmb3IgdGhpcyBqb2IuPC9wPg0KPHA+bGV0XFxcJ3MgcmVhZCB0aGlzIHRvby4uLjo8L3A+DQo8cHJlIGxhbmc9XFwmcXVvdDtzcWxcXCZxdW90Oz4NCkRFTEVURSBhLGIsYw0KRlJPTSB3cF9wb3N0cyBhDQpMRUZUIEpPSU4gd3BfdGVybV9yZWxhdGlvbnNoaXBzIGIgT04gKGEuSUQgPSBiLm9iamVjdF9pZCkNCkxFRlQgSk9JTiB3cF9wb3N0bWV0YSBjIE9OIChhLklEID0gYy5wb3N0X2lkKQ0KV0hFUkUgYS5wb3N0X3R5cGUgPSBcXFwncmV2aXNpb25cXFwnDQo8L3ByZT4NCjxibG9ja3F1b3RlPg0KPHA+dWguLi4gV1RGITwvcD4NCjwvYmxvY2txdW90ZT4NCjxwPmxpdHRsZSBtb3JlIGRpZmZpY3VsdCBzcWwgc3RhdGVtZW50IGlzIHRvbyBoYXJkIHRvIHJlYWQvdW5kZXJzdGFuZCB0byBtZS4gPC9wPg0KPHA+c28sIEkgd3JpdGUgYSBweXRob24gc2NyaXB0IGZvciBzYW1lIGpvYiBvbmx5IHdpdGggZWFzeSBzcWwgc3RhdGVtZW50cyB0aGF0IEkgY2FuIHVuZGVyc3RhbmQuPC9wPg0KPHByZSBsYW5nPVxcJnF1b3Q7cHl0aG9uXFwmcXVvdDs+DQojIS91c3IvYmluL3B5dGhvbg0KIy0qLSBjb2Rpbmc6IHV0Zi04IC0qLQ0KaW1wb3J0IE15U1FMZGINCg0KZGIgPSBNeVNRTGRiLmNvbm5lY3QoZGI9XFxcJ2RiX25hbWVcXFwnLCB1c2VyPVxcXCd1c2VyXFxcJywgcGFzc3dkPVxcXCdwYXNzd2RcXFwnLCBob3N0PVxcXCdsb2NhbGhvc3RcXFwnKQ0KYyA9IGRiLmN1cnNvcigpDQoNCiMgZGVsZXRlIHJldmlzaW9uIGRhdGEgZnJvbSB3cF9wb3N0cyB0YWJsZQ0KYy5leGVjdXRlKFxcXCdERUxFVEUgRlJPTSB3cF9wb3N0cyBXSEVSRSBwb3N0X3R5cGUgPSAmcXVvdDtyZXZpc2lvbiZxdW90O1xcXCcpDQoNCiMgbWFrZSBhIGxpc3Qgb2Ygc3RpbGwgZXhpc3RpbmcgaXRlbXMNCmMuZXhlY3V0ZShcXFwnU0VMRUNUIGlkIEZST00gd3BfcG9zdHNcXFwnKQ0KbF9wb3N0ID0gYy5mZXRjaGFsbCgpDQpwb3N0SURzID0gbWFwKGxhbWJkYSB4OiB4WzBdLCBsX3Bvc3QpDQoNCiMgY2xlYW4gd3BfcG9zdG1ldGEgYnkgcmVmLiBwb3N0SURzDQpjLmV4ZWN1dGUoXFxcJ1NFTEVDVCBtZXRhX2lkLCBwb3N0X2lkIEZST00gd3BfcG9zdG1ldGFcXFwnKQ0KbF9tZXRhID0gYy5mZXRjaGFsbCgpDQpmb3IgbWlkLCBwaWQgaW4gbF9tZXRhOg0KICAgIGlmIG5vdCBwaWQgaW4gcG9zdElEczoNCiAgICAgICAgYy5leGVjdXRlKFxcXCdERUxFVEUgRlJPTSB3cF9wb3N0bWV0YSBXSEVSRSBtZXRhX2lkPSVkXFxcJyVtaWQpDQoNCiMgY2xlYW4gd3BfdGVybV9yZWxhdGlvbnNoaXBzIGJ5IHJlZi4gcG9zdElEcw0KcHJpbnQgYy5leGVjdXRlKFxcXCdTRUxFQ1Qgb2JqZWN0X2lkIEZST00gd3BfdGVybV9yZWxhdGlvbnNoaXBzXFxcJykNCmxfdGVybXMgPSBjLmZldGNoYWxsKCkNCmZvciBvaWQgaW4gbF90ZXJtczoNCiAgICBvaWQgPSBvaWRbMF0NCiAgICBpZiBub3Qgb2lkIGluIHBvc3RJRHM6DQogICAgICAgIGMuZXhlY3V0ZShcXFwnREVMRVRFIEZST00gd3BfdGVybV9yZWxhdGlvbnNoaXBzIFdIRVJFIG9iamVjdF9pZD0lZFxcXCclb2lkKQ0KDQpkYi5jbG9zZSgpDQo8L3ByZT4NCjxwPm5vdyB0aGlzIG1ha2Ugc2Vuc2UgdG8gbWUuIEl0XFxcJ3MgbW9yZSBsb25nIHRleHQgdGhlbiBzaW5nbGUgc3FsIHN0YXRlbWVudC4gYnV0IEkgZG9uXFxcJ3QgY2FyZS4uLjwvcD4NCjxwPkl0IGp1c3Qgd29rcy4gYW5kICBjbGVhbmVkIHVwIGFsbW9zdCA1MCUgZ2FyYmFnZXMgZnJvbSBEQi4gOik8L3A+Ijt9fQ==";}'
categories:
  - Programming
  - Wordpress
tags:
  - mysql
  - 파이썬

---
워드프래스 2.6버젼 부터는 리비젼기능이 기본적으로 추가되어 있습니다.

변경 내역을 저장하는 기능인데, 사실 이 블로그는 개인 블로그라 필요 없는 기능이에요. (그런일은 위키가 잘 해주니까요)

또 퍼블리쉬 전에 자주 고치고, 후에도 또 고치고 하다보니 본 내용에 못지 않게 많은 용량을 사용하고 있을거라 생각되어 살펴보았습니다.

일단, **wp-config.php**에 아래의 설정을 추가하여:

<pre lang="php">define("WP_POST_REVISIONS", false);
</pre>

리비젼 기능을 끄면, 앞으로는 리비젼을 쌓아두지 않게 됩니다.

하지만 기존에 저장되었던 리비젼들은 그대로 DB에 남아있죠. 지워보겠습니다.

> 당연히! -언제든지 망칠 수 있으므로- db백업 후에 진행합니다!

<!--more-->

거의 모든 rdbms는 [sql][1]을 사용해 질의를 보내고(query) 결과를 받는 (retrive) 식으로 사용합니다.

간단한 sql 문은 거의 자연어 같이 그대로 읽을 수 있습니다. 간단한 예제:

<pre lang="sql">SELECT id FROM wp_posts;
</pre>

> wp_posts 테이블에서 id 필드들을 선택해(서 보여줘).

이제, 리비젼 데이터들은 wp_posts 테이블에서 지워 보겠습니다.

조금 어려워 졌지만, 역시 그럭저럭 읽을 수 있습니다:

<pre lang="sql">DELETE FROM wp_posts WHERE post_type = "revision";
</pre>

> post\_type이 revision인 것들을 wp\_posts 테이블에서 지워.

이 정도에서 된다면 좋겠지만 [ERD][2]를 살펴보면 포스트 아이디를 참조하는 테이블이 두개 더 있습니다. 이 두 테이블도 정리해야죠.

그러니까 테이블이 세 개고, 그 중 wp_posts테이블을 참조해서 두 테이블을 정리하면 되는데&#8230;

적당한 sql문을 쓰기 어려워서 검색을 통해 찾아냈습니다.

역시 자연스럽게 읽을&#8230;:

<pre lang="sql">DELETE a,b,c
FROM wp_posts a
LEFT JOIN wp_term_relationships b ON (a.ID = b.object_id)
LEFT JOIN wp_postmeta c ON (a.ID = c.post_id)
WHERE a.post_type = 'revision'
</pre>

> 이건 도저히 못 읽겠다!! ㅁ니ㅓ리나ㅓ리

해서, 이해할 수 있는 sql문들을 가지고 파이썬으로 재 구성 해 봅니다.

<pre lang="python">#!/usr/bin/python
#-*- coding: utf-8 -*-
import MySQLdb

db = MySQLdb.connect(db='db_name', user='user', passwd='passwd', host='localhost')
c = db.cursor()

# type이 revison인 포스트들 삭제
c.execute('DELETE FROM wp_posts WHERE post_type = "revision"')

# 남아있는 포스트들의 아이디를 리스트에 postIDs 담자.
c.execute('SELECT id FROM wp_posts')
l_post = c.fetchall()
postIDs = map(lambda x: x[0], l_post)

# wp_postmeta 테이블에서 이미삭제된 포스트 아이디를 가진 아이템들 삭제.
c.execute('SELECT meta_id, post_id FROM wp_postmeta')
l_meta = c.fetchall()
for mid, pid in l_meta:
    if not pid in postIDs:
        c.execute('DELETE FROM wp_postmeta WHERE meta_id=%d'%mid)

# wp_term_relationships 테이블에서 이미삭제된 포스트 아이디를 가진 아이템들 삭제.
print c.execute('SELECT object_id FROM wp_term_relationships')
l_terms = c.fetchall()
for oid in l_terms:
    oid = oid[0]
    if not oid in postIDs:
        c.execute('DELETE FROM wp_term_relationships WHERE object_id=%d'%oid)

db.close()
</pre>

이쪽이 훨씬 이해하기 좋네요. 조금 길어졌지만&#8230;

그리고, 돌려 보니 DB용량이 50% 쯤 정리되었습니다. 많이도 처묵처묵고 있었네요. -o-;

 [1]: http://ko.wikipedia.org/wiki/SQL
 [2]: http://codex.wordpress.org/File:WP_27_dbsERD.png