---
title: '글설리 알아 차리기: python + XML-RPC + wordpress'
author: suapapa
type: post
date: 2008-12-11T12:47:41+00:00
url: /p=132
dsq_thread_id:
  - 725988391
translations:
  - 'a:1:{i:0;s:7100:"YToyOntzOjI6ImVuIjthOjI6e3M6MTI6InBvc3RfY29udGVudCI7czoyMDM1OiI8cD5JIGFsd2F5cyBodW5nZXIgZm9yIGNvbW1lbnQuIDopPC9wPg0KPHA+SW4gbXkgd29yZHByZXNzLCAtdG8gcHJvdGVjdCBzcGFtIGNvbW1lbnQtIEkgbXVzdCBhcHByb3ZlIGV2ZXJ5IGNvbW1lbnQgdmlhIHdlYiBicm93c2VyLiBidXQsIGJlY2F1c2Ugb2YgbXkgYmxvZyBpcyBub3QgY3Jvd2RlZCwgSSB3YXMgb24gYSBmb29sXFxcJ3MgZXJyYW5kIG9mdGVuLjwvcD4NCjxwPkkgZG9uXFxcJ3Qgd2FudCBiZSBkaXNhcHBvaW50ZWQgdmlhIHdlYiBicm93c2VyLiBzby4uLjwvcD4NCjxibG9ja3F1b3RlPg0KPHA+Z29vZ2xlIGl0ITwvcD4NCjwvYmxvY2txdW90ZT4NCjxwPjwhLS1tb3JlLS0+SSBmb3VuZCA8YSBocmVmPVxcJnF1b3Q7aHR0cDovL3d3dy5ob3d0b2dlZWsuY29tL2hvd3RvL3RoZS1nZWVrLWJsb2cvaG93LXRvLWdlZWstc29mdHdhcmUtd29yZHByZXNzLWNvbW1lbnQtbW9kZXJhdGlvbi1ub3RpZmllci9cXCZxdW90Oz5Xb3JkUHJlc3MgQ29tbWVudCBNb2RlcmF0aW9uIE5vdGlmaWVyPC9hPiBvbiAmcXVvdDtIb3ctVG8gR2VlayZxdW90OyB0aGF0IGRlc2NyaWJlIGhvdyB0byBnZXQgY291bnQgb2YgYXBwcm92ZS1yZWFkeSBjb21tZW50IHZpYSBYTUwtUlBDLjwvcD4NCjxwPmF0IHZlcnkgbGFzdCBvZiBhYm92ZSBhcnRpY2xlLCB5b3UgY2FuIGRvd25sb2FkJm5ic3A7IDxhIGhyZWY9XFwmcXVvdDtodHRwOi8vd3d3Lmhvd3RvZ2Vlay5jb20vc29mdHdhcmVmaWxlcy9Xb3JkUHJlc3NOb3RpZnlfMC4xLnppcFxcJnF1b3Q7PldvcmRQcmVzc05vdGlmeV8wLjEuemlwPC9hPi4gVGhpcyBhcmNoaXZlIGNvbnRhaW4gdHdvIHByb2dyYW1zOzwvcD4NCjxvbD4NCiAgICA8bGk+d29yZHByZXNzIHBsdWdpbjogZ2Vlay13cC1ub3RpZmllci5waHA8L2xpPg0KICAgIDxsaT5kZXNrdG9wIGNsaWVudDwvbGk+DQo8L29sPg0KPHA+Y29weSB0aGUgcGx1Z2luIHRvICZxdW90O3dwLWNvbnRlbnRzL3BsdWdpbi8mcXVvdDsgb24geW91ciBzZXJ2ZXIgYW5kIEFjdGl2YXRlIGxpa2Ugb3RoZXIgbm9ybWFsIHBsdWdpbnMuIEl0XFxcJ3MgdGhhdCBzaW1wbGUhPC9wPg0KPHA+bmV4dCwgVGhlIGNsaWVudC4gSSBkb25cXFwndCBsaWtlIHRoaXMgd3JpdHRlbiBpbiBDIywgd2luZG93IG9ubHkgYW5kJm5ic3A7IHdpdGggbm8gc291cmNlIGNsaWVudC4gc28uLi4gSSBtYWRlIEl0IGFnYWluIT88L3A+DQo8cD51bmZvcnR1bmF0ZWx5LCBJIGhhZCBuZXZlciB1c2VkIFhNTC1SUEMuIDokPC9wPg0KPHA+YnV0LCBmb3J0dW5hdGVseSwgSSBoZWFyZCBjYXUgdXNlIFhNTC1SUEMgd2l0aCBweXRob24hIHNvIGZvdW5kIDxhIGhyZWY9XFwmcXVvdDtodHRwOi8vd3d3Lm9ubGFtcC5jb20vbHB0L2EvNDY4XFwmcXVvdDs+WE1MLVJQQyBpbiBQeXRob248L2E+IG9uIE9OTGFtcCwgcmVhZCBpdCBvbmNlIGFuZCBjYW4gd3JpdGUgdGhlIGNvZGUuPC9wPg0KPHA+eWVzLCBJdFxcXCdzIHRoYXQgc2ltcGxlISBubyBuZWVkIHRvIGtub3cgYW55IHRpY2tsZSBhYm91dCBYTUwuPC9wPg0KPHByZSBsYW5nPVxcJnF1b3Q7cHl0aG9uXFwmcXVvdDs+DQppbXBvcnQgeG1scnBjbGliDQpkZWYgZ2V0Q29tbWVudENudCh3cFVSTCwgdXNlcm5hbWUsIHBhc3N3b3JkKToNCiAgICB3cFN2ciA9IHhtbHJwY2xpYi5TZXJ2ZXIod3BVUkwrJnF1b3Q7L3htbHJwYy5waHAmcXVvdDspDQogICAgcmV0dXJuIHdwU3ZyLmdlZWsuZ2V0Q29tbWVudE1vZGVyYXRpb25Db3VudCh1c2VybmFtZSxwYXNzd29yZCkNCjwvcHJlPg0KPHA+cnVuIGFib3ZlIGZ1bmN0aW9uIGJ5IHBhc3NpbmcgYmxvZ1VSTCwgYWRtaW5JRCBhbmQgcGFzc3dvcmQuPC9wPg0KPHByZSBsYW5nPVxcJnF1b3Q7cHl0aG9uXFwmcXVvdDs+DQpnZXRDb21tZW50Q250KFxcXCdodHRwOi8vd3d3LnN1YXBhcGEubmV0L3dvcmRwcmVzc1xcXCcsIFxcXCdhZG1pblxcXCcsIFxcXCdwYXNzd29yZFxcXCcpDQowDQo8L3ByZT4NCjxwPkl0IHdvcmtzIGdyZWF0bHkhIE5vdyBJIGNhbiBiZSBkaXNhcHBvaW50ZWQgdmlhIFhNTC1SUEMuIFllfiE8L3A+DQo8cD5ULVQ8L3A+IjtzOjEwOiJwb3N0X3RpdGxlIjtzOjQ5OiJVXFxcJ3ZlIGdvdCBjb21tZW50OiBweXRob24gKyBYTUwtUlBDICsgd29yZHByZXNzIjt9czoyOiJrbyI7YToyOntzOjEyOiJwb3N0X2NvbnRlbnQiO3M6MzAzNzoiPHA+66as7ZSM7J2AIOyWuOygnOuCmCDshKTroIjsnoXri4jri6QuIDopPC9wPg0KPHA+7KCcIOu4lOuhnOq3uOydmCDqsr3smrAgLeyKpO2MuCDrsKnsp4Drpbwg7JyE7ZW0LSDrqqjrk6Ag64yT6riA7J2AIOu4lOuhnOq3uCDqtIDrpqwg7Yyo64SQ7JeQ7IScIOyKueyduO2VnCDtm4Tsl5Ag67O07Jes7KeA6rKMIOuQmOuKlOuNsCwg7J20IOu4lOuhnOq3uOyXkCDrjJPquIDsnbQg6re466CH6rKMIOyekOyjvCDri6zrpqzripQg7Y647J20IOyVhOuLiOudvCDshKTroIjsnbTripQg66eY7Jy866GcIOq0gOumrO2MqOuEkOyXkCDrk6TslrTsmYAg67Sk64ukIO2Xm+2Dley5mOuKlCDsnbzsnbQg67mE7J2867mE7J6sIO2VqeuLiOuLpC4gLSwuLTs7PC9wPg0KPHA+7Ju5IOu4jOudvOyasOyguOulvCDthrXtlZjsp4Ag7JWK6rOg64+EIOuMgOq4sOykkeyduCDrjJPquIDsnbQg7J6I7Jy866m0IOuwlOuhnCDslYzroKTso7zripQg67Cp67KV7J20IOyeiOycvOuptCDsoovqsqDri6TripQg7IOd6rCB7J20IOuTpOuNlOq1sOyalC48L3A+DQo8YmxvY2txdW90ZT4NCjxwPuucu+ydtCDsnojsnLzrqbQg6rKA7IOJITwvcD4NCjwvYmxvY2txdW90ZT4NCjxwPjwhLS1tb3JlLS0+JnF1b3Q7SG93LVRvIEdlZWsmcXVvdDsg67iU66Gc6re47J2YIDxhIGhyZWY9XFwmcXVvdDtodHRwOi8vd3d3Lmhvd3RvZ2Vlay5jb20vaG93dG8vdGhlLWdlZWstYmxvZy9ob3ctdG8tZ2Vlay1zb2Z0d2FyZS13b3JkcHJlc3MtY29tbWVudC1tb2RlcmF0aW9uLW5vdGlmaWVyL1xcJnF1b3Q7PldvcmRQcmVzcyBDb21tZW50IE1vZGVyYXRpb24gTm90aWZpZXI8L2E+IOyXkOyEnCBYTUwtUlBD66W8IOyCrOyaqe2VtCAt7Ju5IOu4jOudvOyasOyguOulvCDthrXtlZjsp4Ag7JWK6rOgLSDsirnsnbgg64yA6riwIOykkeyduCDrjJPquIDsnZgg7IiY66W8IOuwm+yVhOyYpOuKlCDrsKnrspXsnYQg7LC+7J2EIOyImCDsnojsl4jsirXri4jri6QuPC9wPg0KPHA+66eB7YGs65CcIOu4lOuhnOq3uOydmCDqsbDsnZgg66eI7KeA66eJ7JeQ7IScIDxhIGhyZWY9XFwmcXVvdDtodHRwOi8vd3d3Lmhvd3RvZ2Vlay5jb20vc29mdHdhcmVmaWxlcy9Xb3JkUHJlc3NOb3RpZnlfMC4xLnppcFxcJnF1b3Q7PldvcmRQcmVzc05vdGlmeV8wLjEuemlwPC9hPiDtjIzsnbzsnYQg64uk7Jq067Cb7Jy87IukIOyImCDsnojsirXri4jri6QuIOydtCDtjIzsnbzsnYAg65GQIOu2gOu2hOycvOuhnCDrkJjslrQg7J6I64qU642wOzwvcD4NCjxvbD4NCiAgICA8bGk+7ISc67KE7JeQIOyKueyduCDrjIDquLAg64yT6riA7J2YIOyImOulvCDsm4zrk5ztlITroIjsiqQgRELsl5DshJwg7J297Ja0IOumrO2EtO2VtCDso7zripQsIOybjOuTnO2UhOugiOyKpCDtlIzrn6zqt7jsnbg6IGdlZWstd3Atbm90aWZpZXIucGhwPC9saT4NCiAgICA8bGk+7KO86riw7KCB7Jy866GcIO2VtOuLuSBYTUwtUlBDIO2VqOyImOulvCDrtojrn6zshJwgUEPsl5Ag7ZGc7Iuc7ZW0IOyjvOuKlCBDI+ycvOuhnCDsnpHshLHrkJwg7YG065287J207Ja47Yq4OiDrgpjrqLjsp4A8L2xpPg0KPC9vbD4NCjxwPuyeheuLiOuLpC48L3A+DQo8cD7tlIzrn6zqt7jsnbjsnYAg64uk66W4IO2UjOufrOq3uOyduCDsspjrn7wg7ISc67KE7J2YICZxdW90O3dwLWNvbnRlbnRzL3BsdWdpbi8mcXVvdDsg7JeQIOychOy5mCDsi5ztgqTqs6Ag6rSA66asIO2MqOuEkOyXkOyEnCBBY3RpdmF0ZSDtlanri4jri6QuIOqwhOuLqO2VmOuEpOyalCE8L3A+DQo8cD7tlZjsp4Drp4wsIO2BtOudvOydtOyWuO2KuOqwgCDsnIjrj4Qg7KCE7JqpIOyduOuNsOuLpCDrsJTsnbTrhIjrpqzrp4wg7J6I7Iq164uI64ukLiDqt7jrnpjshJwuLi4g64uk7IucIOunjOuTreuLiOuLpCE/PC9wPg0KPHA+6re465+w642wLCDsoIQgWE1MLVJQQ+ydhCDsgqzsmqntlbQg67O4IOyggeydtCDtlZzrsojrj4Qg7JeG7JeI7Iq164uI64ukLiA6JDwvcD4NCjxwPuuLpO2Wie2eiCwg66mL7J+B7J20IO2MjOydtOyNrOycvOuhnCBYTUwtUlBD66W8IOyCrOyaqe2VoCDsiJgg7J6I64uk6rOgIOuTpOydgCDrsJQg7J6I7Ja0IE9OTGFtcOydmCA8YSBocmVmPVxcJnF1b3Q7aHR0cDovL3d3dy5vbmxhbXAuY29tL2xwdC9hLzQ2OFxcJnF1b3Q7PlhNTC1SUEMgaW4gUHl0aG9uPC9hPiDsnYQg7LC+7JWEIOydveqzoCDqsJzrhZAg7YOR7J6s66W8IO2WiOyKteuLiOuLpC48L3A+DQo8cD7ri6Tsi5wgWE1M7LGF7J2EIOq6vOuCtCDrk6TslrTslbwg6rKg64uk64qUIOuLpOynkOydtCDrrLTsg4ntlZjqsowg7J20IOuwqeuyleydhCAmcXVvdDvsgqzsmqkmcXVvdDvtlaAg65WM64qUIFhNTOyXkCDqtIDtlZwg7KeA7Iud7J20IOyghO2YgCDtlYTsmpQg7ZWY7KeAIOyViuuNlOq1sOyalC4g44WLPC9wPg0KPHA+6rKM64uk6rCALCDtl4jrrLTtlZjqsowg6rCE64uo7ZWp64uI64ukOjwvcD4NCjxwcmUgbGFuZz1cXCZxdW90O3B5dGhvblxcJnF1b3Q7Pg0KaW1wb3J0IHhtbHJwY2xpYg0KZGVmIGdldENvbW1lbnRDbnQod3BVUkwsIHVzZXJuYW1lLCBwYXNzd29yZCk6DQogICAgd3BTdnIgPSB4bWxycGNsaWIuU2VydmVyKHdwVVJMKyZxdW90Oy94bWxycGMucGhwJnF1b3Q7KQ0KICAgIHJldHVybiB3cFN2ci5nZWVrLmdldENvbW1lbnRNb2RlcmF0aW9uQ291bnQodXNlcm5hbWUscGFzc3dvcmQpDQo8L3ByZT4NCjxwPuydtOygnCDruJTroZzqt7jsnZgg7KO87IaM7JmAIOq0gOumrOyekCDslYTsnbTrlJQsIO2MqOyKpOybjOuTnOulvCDsoITri6ztlZjsl6wg7JyEIO2VqOyImOulvCDsi6Ttlokg7ZWp64uI64ukLjwvcD4NCjxwcmUgbGFuZz1cXCZxdW90O3B5dGhvblxcJnF1b3Q7Pg0KZ2V0Q29tbWVudENudChcXFwnaHR0cDovL3d3dy5zdWFwYXBhLm5ldC93b3JkcHJlc3NcXFwnLCBcXFwnYWRtaW5cXFwnLCBcXFwncGFzc3dvcmRcXFwnKQ0KMA0KPC9wcmU+DQo8cD7snpgg64+Z7J6RIO2VqeuLiOuLpC4g7J207KCcLCDsm7nruIzrnbzsmrDsoLjrpbwg652E7Jqw7KeAIOyViuqzoOuPhCDtl5vtg5Ug7LmgIOyImCDsnojqsowg65CY7JeI7Iq164uI64ukLiDtkbjtlZjtlZghPC9wPg0KPHA+VC1UPC9wPiI7czoxMDoicG9zdF90aXRsZSI7czo1Njoi6riA7ISk66asIOyVjOyVhCDssKjrpqzquLA6IHB5dGhvbiArIFhNTC1SUEMgKyB3b3JkcHJlc3MiO319";}'
categories:
  - Programming
  - Wordpress
tags:
  - WP-plugin
  - XML-RPC
  - 파이썬

---
리플은 언제나 설레입니다. 🙂

제 블로그의 경우 -스팸 방지를 위해- 모든 댓글은 블로그 관리 패널에서 승인한 후에 보여지게 되는데, 이 블로그에 댓글이 그렇게 자주 달리는 편이 아니라 설레이는 맘으로 관리패널에 들어와 봤다 헛탕치는 일이 비일비재 합니다. -,.-;;

웹 브라우져를 통하지 않고도 대기중인 댓글이 있으면 바로 알려주는 방법이 있으면 좋겠다는 생각이 들더군요.

> 뜻이 있으면 검색!

"How-To Geek" 블로그의 

[WordPress Comment Moderation Notifier][1] 에서 XML-RPC를 사용해 -웹 브라우져를 통하지 않고- 승인 대기 중인 댓글의 수를 받아오는 방법을 찾을 수 있었습니다.

링크된 블로그의 거의 마지막에서 [WordPressNotify_0.1.zip][2] 파일을 다운받으실 수 있습니다. 이 파일은 두 부분으로 되어 있는데;

  1. 서버에 승인 대기 댓글의 수를 워드프레스 DB에서 읽어 리턴해 주는, 워드프레스 플러그인: geek-wp-notifier.php
  2. 주기적으로 해당 XML-RPC 함수를 불러서 PC에 표시해 주는 C#으로 작성된 클라이언트: 나머지

입니다.

플러그인은 다른 플러그인 처럼 서버의 "wp-contents/plugin/" 에 위치 시키고 관리 패널에서 Activate 합니다. 간단하네요!

하지만, 클라이언트가 윈도 전용 인데다 바이너리만 있습니다. 그래서&#8230; 다시 만듭니다!?

그런데, 전 XML-RPC을 사용해 본 적이 한번도 없었습니다. :$

다행히, 멋쟁이 파이썬으로 XML-RPC를 사용할 수 있다고 들은 바 있어 ONLamp의 [XML-RPC in Python][3] 을 찾아 읽고 개념 탑재를 했습니다.

다시 XML책을 꺼내 들어야 겠다는 다짐이 무색하게 이 방법을 "사용"할 때는 XML에 관한 지식이 전혀 필요 하지 않더군요. ㅋ

게다가, 허무하게 간단합니다:

```python
import xmlrpclib
def getCommentCnt(wpURL, username, password):
    wpSvr = xmlrpclib.Server(wpURL+"/xmlrpc.php")
    return wpSvr.geek.getCommentModerationCount(username,password)

```

이제 블로그의 주소와 관리자 아이디, 패스워드를 전달하여 위 함수를 실행 합니다.

```python
getCommentCnt('https://homin.dev/wp', 'admin', 'password')
0

```

잘 동작 합니다. 이제, 웹브라우져를 띄우지 않고도 헛탕 칠 수 있게 되었습니다. 푸하하!

T-T

 [1]: http://www.howtogeek.com/howto/the-geek-blog/how-to-geek-software-wordpress-comment-moderation-notifier/
 [2]: http://www.howtogeek.com/softwarefiles/WordPressNotify_0.1.zip
 [3]: http://www.onlamp.com/lpt/a/468