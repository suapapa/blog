---
title: 아두이노 모터 테스트 (H-bridge)
author: suapapa
type: post
date: 2010-10-05T05:57:10+00:00
url: /p=472
dsq_thread_id:
  - 722491106
translations:
  - 'a:1:{i:0;s:4744:"YToxOntzOjI6ImtvIjthOjI6e3M6MTA6InBvc3RfdGl0bGUiO3M6NDA6IuyVhOuRkOydtOuFuCDrqqjthLAg7YWM7Iqk7Yq4IChILWJyaWRnZSkiO3M6MTI6InBvc3RfY29udGVudCI7czozNDM5OiI8cD48aW1nIHdpZHRoPVxcJnF1b3Q7NDIwXFwmcXVvdDsgaGVpZ2h0PVxcJnF1b3Q7MjgwXFwmcXVvdDsgYWx0PVxcJnF1b3Q7XFwmcXVvdDsgc3JjPVxcJnF1b3Q7aHR0cDovL3dlYi5zdWFwYXBhLm5ldDo4MDgwL3dvcmRwcmVzcy93cC1jb250ZW50L3VwbG9hZHMvaW1hZ2Uvb3B0by1jb3VwbGVkX2gtYnJpZGdlX3Ntb2tlX3Rlc3QuanBnXFwmcXVvdDsgLz48L3A+DQo8cD7rrLXsp4HtlZwg66qo7YSw66W8IO2VmOuCmCDslrvslrTshJwg7JWE65GQ7J2064W466W8IOyCrOyaqe2VtCDrj4zroKQg67O07JWY7Iq164uI64ukLjwvcD4NCjxwPuyVhOuRkOydtOuFuOyXkOyEnCBQV00g65GQIO2VgCgxMSwgMTAp6rO8IEdOROunjOycvOuhnCDrj4Xrpr3rkJwg7KCE7JuQ7J2YIOusteynge2VnCDrqqjthLDrpbwg7J2066asIOyggOumrCDrj4zroKQg67O8IOyImCDsnojsirXri4jri6QuPC9wPg0KPHA+PCEtLW1vcmUtLT7rs7TthrXsnZggREMg66qo7YSw64qUIOygkeygkOydtCDrkZAg6rCcIOyeiOyKteuLiOuLpC4g7ZWcIOuwqe2WpeycvOuhnOunjCDrj4zrpqzroKTrqbQgTU9TRkVU7J2EIO2VmOuCmCDsjajshJwg66qo7YSw7Jqp7Jy866GcIOuPheumveuQnCDsoITsm5DsnYQg65Oc65287J2067iMIO2VtCDso7zrqbQg65CY7KeA66eMLCDslpEg67Cp7Zal7Jy866GcIOybgOyngeydtOqyjCDtlZjroKTrqbQgSC1icmlkZ2XrnbzripQg7ZqM66GcIOq1rOyEseydtCDtlYTsmpTtlanri4jri6Q6PC9wPg0KPHA+PGltZyB3aWR0aD1cXCZxdW90OzU5M1xcJnF1b3Q7IGhlaWdodD1cXCZxdW90OzM1MlxcJnF1b3Q7IGFsdD1cXCZxdW90O1xcJnF1b3Q7IHNyYz1cXCZxdW90O2h0dHA6Ly93ZWIuc3VhcGFwYS5uZXQ6ODA4MC93b3JkcHJlc3Mvd3AtY29udGVudC91cGxvYWRzL2ltYWdlL2gtYnJpZGdlXzAwLnBuZ1xcJnF1b3Q7IC8+PC9wPg0KPHA+7ZqM66Gc7JeQ7IScIOuztOuLpCDsi7bsnbQgTU9TRkVU7J20IOuEpOqyjCDrk6TslrTqsIDqs6AsIE1DVSjslYTrkZDsnbTrhbgp7JeQ7ISc7J2YIOyeheugpSBJX0EsIElfQuyXkCDrlLDrnbwsIOuqqO2EsOuhnOydmCDstpzroKUgTV9BLCBNX0LsnZgg6re57ISx7J20IOuwlOuAjOqyjCDrkKnri4jri6QuPC9wPg0KPHA+7JiI66GcLCBJX0HrpbwgSElHSCBJX0LrpbwgTE9X66GcIOuRkOuptCwgTU9TRkVUIFUkMSwgVSQ0IOqwgCDsl7TrpqzrqbTshJwg64+M6rOgIOuwmOuMgOuhnCDtlZjrqbQgVSQyLCBVJDPsnbQg7Je066as66m07IScIOuwmOuMgOuhnCDrj4zqsowg65CY7KOgLiDtmozroZzqsIAg7IOd6ri06rKMIEgg66qo7JaR7J206528IEgtYnJpZGdl65286rOgIOu2iOugpOyalC48L3A+DQo8cD7rmJDtlZwg7JeU6rCE7ZWcIOuqqOyKpO2Oq+ydgCDsnbzrsJggdHLqs7wg64us66asIO2dmOumtCDsiJgg7J6I64qUIOyghOulmOqwgCAxMOuqhyBB64KYIOuQmOq4sCDrlYzrrLjsl5Ag66y17KeB7ZWcIOuhnOuTnOulvCDrk5zrnbzsnbTruIwg7ZWY6riwIOyii+yKteuLiOuLpC48L3A+DQo8cD7snbTroIfqsowg66y17KeB7ZWcIOyghOybkOydhCDri6Tro7Ag65WM64qUIE1DVeyXkCDsmIHtlqXsnYQg67Cb7KeAIOyViuuPhOuhnSDsoITsm5DsnYQg67aE66as7ZW0IOyjvOuKlOqyjCDsoovsirXri4jri6QuIOyYte2GoOy7pO2UjOufrOulvCDsgqzsmqntlbQg67aE66as7ZW0IOu0pOyWtOyalC48L3A+DQo8cD48aW1nIHdpZHRoPVxcJnF1b3Q7NDU5XFwmcXVvdDsgaGVpZ2h0PVxcJnF1b3Q7MzQzXFwmcXVvdDsgYWx0PVxcJnF1b3Q7XFwmcXVvdDsgc3JjPVxcJnF1b3Q7aHR0cDovL3dlYi5zdWFwYXBhLm5ldDo4MDgwL3dvcmRwcmVzcy93cC1jb250ZW50L3VwbG9hZHMvaW1hZ2UvaC1icmlkZ2VfMDEucG5nXFwmcXVvdDsgLz48L3A+DQo8cD7qsIDsnqUg7Jm8IOyqveydmCDshLgg7ZWA7J20IOyVhOuRkOydtOuFuOyXkOyEnCDrgpjsmKTripQg7ZWA65OkKFBXTTEsIEdORCwgUFdNMinsnbjrjbAsIOuztOuLpOyLtuydtCDsmLXthqDsu6TtlIzrn6zrpbwg6rK96rOE66GcIOyZhOyghO2eiCDsoITsm5DsnYQg67aE66as7ZWgIOyImCDsnojsirXri4jri6QuPC9wPg0KPHA+DQo8bWV0YSBodHRwLWVxdWl2PVxcJnF1b3Q7Y29udGVudC10eXBlXFwmcXVvdDsgY29udGVudD1cXCZxdW90O3RleHQvaHRtbDsgY2hhcnNldD11dGYtOFxcJnF1b3Q7PuuLpOydjCDrp4Htgazsl5DshJwmbmJzcDs8YSBocmVmPVxcJnF1b3Q7aHR0cDovL3dlYi5zdWFwYXBhLm5ldDo4MDgwL3N2bi9IVy9tb3Rvci9oLWJyaWRnZS5zY2hcXCZxdW90Oz7tmozroZzrj4Q8L2E+7JmAJm5ic3A7PGEgaHJlZj1cXCZxdW90O2h0dHA6Ly93ZWIuc3VhcGFwYS5uZXQ6ODA4MC9zdm4vSFcvbW90b3IvaC1icmlkZ2UuYnJkXFwmcXVvdDs+7JWE7Yq47JuM7YGsPC9hPuulvCDri6TsmrQg67Cb7Jy87IukIOyImCDsnojsirXri4jri6QuPC9tZXRhPg0KPC9wPg0KPHA+PGltZyB3aWR0aD1cXCZxdW90OzQyMFxcJnF1b3Q7IGhlaWdodD1cXCZxdW90OzI4MFxcJnF1b3Q7IGFsdD1cXCZxdW90O1xcJnF1b3Q7IHNyYz1cXCZxdW90O2h0dHA6Ly93ZWIuc3VhcGFwYS5uZXQ6ODA4MC93b3JkcHJlc3Mvd3AtY29udGVudC91cGxvYWRzL2ltYWdlL29wdG8tY291cGxlZF9oLWJyaWRnZS5qcGdcXCZxdW90OyAvPjwvcD4NCjxwPuusteynge2VnCDroZzrk5woQSnqsIAg6rG466aw64uk64qUIOqyg+ydgCDri6Tsi5wg66eQ7ZW0IOyXtOydtCDrgpzri6TripQg7J207JW86riwIOyduOuMgCwgNOqwnOydmCBNT1NGRVTspJEg7ZWcIOuyiOyXkCDrkZDqsJzslKnrp4wg7LycIOyngOuLiOq5jCDrjZQg64ST7J2AIOuwqeyXtOuptOyggeydhCDsgqzsmqntlZjroKTqs6AsIOuwqeyXtO2MkOuTpOydhCDrtpnsl6zshJwg64KY7Je07ZW0IOu0pOuKlOuNsC4uLjwvcD4NCjxwPuyDneqwge2VtCDrs7Tri4gg67Cp7Je07YyQ7J2EIOuUsOudvCBNT1NGRVTrk6TsnbQg7Ie87Yq465CgIOyImOqwgCDsnojrhKTsmpQsIOychCDtlITroZzthqAg7YOA7J6F7J2YIOyCrOynhOyXkOyEnOuKlCDsoIjsl7Dsi5ztirjrpbwg7IKs7Jqp7ZW0IOuwqeyXtO2MkOqzvCBNT1NGRVTsnbQg7ISc66GcIOyHvO2KuOuQmOyngCDslYrrj4TroZ0g67aE66as7ZW0IOyjvOyXiOyKteuLiOuLpC48L3A+DQo8cD7rrLzroaAg7J2064yA66GcIOyemCDrj4zquLQg7ZWY64qU642wLi4uIOuqqO2EsCDtlZjrgpjrpbwg64+M66as6riwIOychO2VtCDtlYTsmpTtlZwg67aA7ZKI65Ok7J20IOyggeydgCDtjrjsnbQg7JWE64uI6528IOuztO2GteydgCDsoIHri7ntlZwg66qo7YSw65Oc65287J2067KEIElD66W8IOyCrOyaqe2VmOuNlOq1sOyalC4g6rSc7LaY7ZWcIOuqqO2EsCDrk5zrnbzsnbTrsoTripQg67mE7Iu47KeA66eMLCDri6gg7ZWY64KY7J2YIElD66GcIOyggCDrrYntg7HsnbTrpbwg64yA7Iug7ZWgIOyImCDsnojri6TripQg7J6l7KCQ7J20IOyeiOycvOuLiOq5jOyalC4gOik8L3A+Ijt9fQ==";}'
categories:
  - Arduino
tags:
  - 모터
  - 아두이노

---
<img loading="lazy" width="420" height="280" alt="" src="https://homin.dev/asset/suapapa-blog/wp-content_uploads/image/opto-coupled_h-bridge_smoke_test.jpg" />

묵직한 모터를 하나 얻어서 아두이노를 사용해 돌려 보았습니다.

아두이노에서 PWM 두 핀(11, 10)과 GND만으로 독립된 전원의 묵직한 모터를 이리 저리 돌려 볼 수 있습니다.

<!--more-->보통의 DC 모터는 접점이 두 개 있습니다. 한 방향으로만 돌리려면 MOSFET을 하나 써서 모터용으로 독립된 전원을 드라이브 해 주면 되지만, 양 방향으로 움직이게 하려면 H-bridge라는 회로 구성이 필요합니다:

<img loading="lazy" width="593" height="352" alt="" src="https://homin.dev/asset/suapapa-blog/wp-content_uploads/image/h-bridge_00.png" /> 

회로에서 보다 싶이 MOSFET이 네게 들어가고, MCU(아두이노)에서의 입력 I\_A, I\_B에 따라, 모터로의 출력 M\_A, M\_B의 극성이 바뀌게 됩니다.

예로, I\_A를 HIGH I\_B를 LOW로 두면, MOSFET U$1, U$4 가 열리면서 돌고 반대로 하면 U$2, U$3이 열리면서 반대로 돌게 되죠. 회로가 생긴게 H 모양이라 H-bridge라고 불려요.

또한 엔간한 모스펫은 일반 tr과 달리 흘릴 수 있는 전류가 10몇 A나 되기 때문에 묵직한 로드를 드라이브 하기 좋습니다.

이렇게 묵직한 전원을 다룰 때는 MCU에 영향을 받지 않도록 전원을 분리해 주는게 좋습니다. 옵토커플러를 사용해 분리해 봤어요.

<img loading="lazy" width="459" height="343" alt="" src="https://homin.dev/asset/suapapa-blog/wp-content_uploads/image/h-bridge_01.png" /> 

가장 왼 쪽의 세 핀이 아두이노에서 나오는 핀들(PWM1, GND, PWM2)인데, 보다싶이 옵토커플러를 경계로 완전히 전원을 분리할 수 있습니다.

<meta http-equiv="content-type" content="text/html; charset=utf-8" />
다음 링크에서 
[회로도][1]와 [아트워크][2]를 다운 받으실 수 있습니다.

<img loading="lazy" width="420" height="280" alt="" src="https://homin.dev/asset/suapapa-blog/wp-content_uploads/image/opto-coupled_h-bridge.jpg" /> 

묵직한 로드(A)가 걸린다는 것은 다시 말해 열이 난다는 이야기 인대, 4개의 MOSFET중 한 번에 두개씩만 켜 지니까 더 넓은 방열면적을 사용하려고, 방열판들을 붙여서 나열해 봤는데&#8230;

생각해 보니 방열판을 따라 MOSFET들이 쇼트될 수가 있네요, 위 프로토 타입의 사진에서는 절연시트를 사용해 방열판과 MOSFET이 서로 쇼트되지 않도록 분리해 주었습니다.

물론 이대로 잘 돌긴 하는데&#8230; 모터 하나를 돌리기 위해 필요한 부품들이 적은 편이 아니라 보통은 적당한 모터드라이버 IC를 사용하더군요. 괜춘한 모터 드라이버는 비싸지만, 단 하나의 IC로 저 뭉탱이를 대신할 수 있다는 장점이 있으니까요. 🙂

 [1]: https://homin.dev/svn/HW/motor/h-bridge.sch
 [2]: https://homin.dev/svn/HW/motor/h-bridge.brd