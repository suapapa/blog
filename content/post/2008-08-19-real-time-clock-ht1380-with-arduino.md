---
title: Real Time Clock HT1380 with Arduino
author: suapapa
type: post
date: 2008-08-19T10:51:50+00:00
url: /p=94
translations:
  - 'a:1:{i:0;s:6900:"YToxOntzOjI6ImtvIjthOjM6e3M6MTE6InBvc3RfZXhjZXB0IjtzOjA6IiI7czoxMjoicG9zdF9jb250ZW50IjtzOjUwMzY6IjxwPuyCrOyLpCwg7JWE65GQ7J2064W46rCAIOyggOugtO2VnCDsnbTsnKDripQg7KO867OA7J6l7LmY65Ok7J20IOyXhuq4sCDrlYzrrLjsnoXri4jri6QuPC9wPg0KPHA+6rWt64K07JeQ7IScIO2MkOunpOuQmOuKlCBBVlIg6rCc67CcIOuztOuTnOuTpOydgCDshLzshJzrqbAsIOyKpOychOy5mOupsCwgQ0xDROuTseydhCDso7zroIEg7KO866CBIOuLrOyVhCDrjansuZjqsIAg7YGs6rOgIOu5hOyLuOyjoC4g662QLCDsgr3sp4jtlaAg6rGw66as6rCAIOykhOyWtOuTpCDsiJjrj4Qg7J6I6rKg7KeA66eMLCDsgr3sp4gg7ZWgIOyImCDsl4bqsowg66eM65Ok7Ja0IOuyhOumrOuKlCDqt7jrn7DqsbQg7KCcIOy3qO2WpeydgCDslYTri4jsl5DsmpQuPC9wPg0KPHA+7IKs7IukLCDslYTrkZDsnbTrhbjrp4zsnLzroZzripQgKDEz67KIIExFROulvCDquZzrsJXsnbTripQg6rG4IOygnOyZuO2VmOqzoCkg6rGw7J2YIOyVhOustOqyg+uPhCDtlaAg6rKMIOyXhuyKteuLiOuLpC4g7J207KCcLCDslYTrkZDsnbTrhbjsl5Ag7KO867OA7J6l7LmY66W8IOuLrOyVhCDrs7TqsqDsirXri4jri6QuPC9wPg0KPHA+7J6E67Kg65SU65OcIOyEuOyDgeydmCBIZWxsbyB3b3JsZOqyqSDslrTtlIzrpqzsvIDsnbTshZjsnYAgSTJD66GcIO2GteyLoO2VmOuKlCA8YSB0YXJnZXQ9XFwmcXVvdDtfYmxhbmtcXCZxdW90OyBocmVmPVxcJnF1b3Q7aHR0cDovL3d3dy50ZXJtcy5jby5rci9SVEMuaHRtXFwmcXVvdDs+UlRDPC9hPuulvCDsl7DqsrDtlZjripQg6rKDIOyeheuLiOuLpC4gSTJD7ZSE66Gc7Yag7L2c7J2AIOuEkOumrCDsgqzsmqnrkJjripQg7ZGc7KSAIOykkSDtlZjrgpjroZwsIOyVjOyVhOuRkOuptCDrkZDqs6DrkZDqs6Ag7Jyg7Jqp7ZWY66mwLCBSVEPripQg7Iu46rOgIOqwhOuLqO2VnCDsnqXsuZjsnbTrr4DroZwg67Cw7Jqw6riw7JeQIOyii+yKteuLiOuLpC48L3A+DQo8cD7qt7jrnpjshJwsIFJUQ+y5qSBIVDEzODDsnYQg6rWs7J6F7ZaI64qU642wLCDtjJDrp6Qg7Y6Y7J207KeA7J2YIOyEpOuqheqzvCDri6zrpqwg7J20IOuFgOyEneydtCBJMkMg7ZSE66Gc7Yag7L2c66GcIO2GteyLoOydhCDtlZjsp4Ag7JWK642U6rWw7JqULjwvcD4NCjxibG9ja3F1b3RlPu2LgOuguOuLpOqzoCDslYzroKTspJjrj4Qg6rOg7LmY7LmY64+EIOyViuqzoCwgZWxlcGFydHMg7J6K7KeAIOyViuqyoOuLpC4gLV8tKzwvYmxvY2txdW90ZT4NCjxwPuq3uOufvCBJMkPqsIAg7JWE64uMIFJUQ+ulvCDslYTrkZDsnbTrhbjsl5Ag7Jew6rKw7ZW0IOuztOqyoOyKteuLiOuLpC4gSFQxMzgw7J2AIOyEuCDshKDsnYQg7IKs7Jqp7ZW0IE1DVeyZgCDthrXsi6Ag7ZWp64uI64ukLiDrjbDsnbTtg4Ag7Iuc7Yq466W8IOq4sOy0iOuhnCDqtaztmIQh44Sx44Sx44WFITwvcD4NCjxibG9ja3F1b3RlPuuyhOumtOyImOuKlCDsl4bsnpbslYTsmpQuPC9ibG9ja3F1b3RlPiA8IS0tbW9yZS0tPg0KPHA+PHN0cm9uZz7tlZjrk5zsm6jslrQg7KSA67mEIDo8L3N0cm9uZz48L3A+DQo8cD48aW1nIHdpZHRoPVxcJnF1b3Q7NDIwXFwmcXVvdDsgaGVpZ2h0PVxcJnF1b3Q7MjgwXFwmcXVvdDsgY2xhc3M9XFwmcXVvdDtpbWFnZWZyYW1lXFwmcXVvdDsgYWx0PVxcJnF1b3Q7aHQxMzgwX3BhcnRzLmpwZ1xcJnF1b3Q7IHNyYz1cXCZxdW90Oy93b3JkcHJlc3Mvd3AtY29udGVudC91cGxvYWRzLzIwMDgvMDgvaHQxMzgwX3BhcnRzLmpwZ1xcJnF1b3Q7IC8+PC9wPg0KPHVsPg0KICAgIDxsaT48YSBocmVmPVxcJnF1b3Q7aHR0cHM6Ly93d3cuZWxlcGFydHMuY28ua3Ivdmlldy5waHA/Y2F0ZTE9JmFtcDtjYXRlMj0mYW1wO2NhdGUzPSZhbXA7Y2F0ZTQ9JmFtcDtpdGVtPTEwNjg5JmFtcDtrZXl3b3JkPSZhbXA7dV9uPTI1NTYwJmFtcDtwYWdlPTFcXCZxdW90Oz5TZXJpYWwgVGltZSBLZWVwZXIgSUMgKEhUMTM4MCk8L2E+PC9saT4NCiAgICA8bGk+PGEgaHJlZj1cXCZxdW90O2h0dHBzOi8vd3d3LmVsZXBhcnRzLmNvLmtyL3ZpZXcucGhwP2NhdGUxPSZhbXA7Y2F0ZTI9JmFtcDtjYXRlMz0mYW1wO2NhdGU0PSZhbXA7aXRlbT03NTM3JmFtcDtrZXl3b3JkPSZhbXA7dV9uPTI1NTYwJmFtcDtwYWdlPTFcXCZxdW90Oz5UdW5pbmcgRm9yayAtMzIuNzY4S0h6PC9hPjwvbGk+DQogICAgPGxpPjxhIGhyZWY9XFwmcXVvdDtodHRwczovL3d3dy5lbGVwYXJ0cy5jby5rci92aWV3LnBocD9jYXRlMT0mYW1wO2NhdGUyPSZhbXA7Y2F0ZTM9JmFtcDtjYXRlND0mYW1wO2l0ZW09ODU2JmFtcDtrZXl3b3JkPSZhbXA7dV9uPTI1NTYwJmFtcDtwYWdlPTFcXCZxdW90Oz5DZXJhbWljIDVwRiwgNTBWPC9hPjwvbGk+DQo8L3VsPg0KPHA+PGEgdGFyZ2V0PVxcJnF1b3Q7X2JsYW5rXFwmcXVvdDsgaHJlZj1cXCZxdW90O2h0dHA6Ly93d3cuYWxsZGF0YXNoZWV0LmNvLmtyL2RhdGFzaGVldC1wZGYvcGRmX2tvci82NDQxMi9IT0xURUsvSFQxMzgwLmh0bWxcXCZxdW90Oz7rjbDsnbTthLDsi5ztirg8L2E+7J2YIO2ajOuhnOuPhOulvCDssLjqs6DtlZjsl6wg7KGw66a9LjwvcD4NCjxwPjxzdHJvbmc+7ZyY66as66atIOu/hSE6PC9zdHJvbmc+PC9wPg0KPHA+PGltZyB3aWR0aD1cXCZxdW90OzQyMFxcJnF1b3Q7IGhlaWdodD1cXCZxdW90OzI4MFxcJnF1b3Q7IGNsYXNzPVxcJnF1b3Q7aW1hZ2VmcmFtZVxcJnF1b3Q7IGFsdD1cXCZxdW90O2h0MTM4MF9tb2R1bGUuanBnXFwmcXVvdDsgc3JjPVxcJnF1b3Q7L3dvcmRwcmVzcy93cC1jb250ZW50L3VwbG9hZHMvMjAwOC8wOC9odDEzODBfbW9kdWxlLmpwZ1xcJnF1b3Q7IC8+PC9wPg0KPHA+7JWE65GQ7J2064W47J2YIDVW7KCE7JuQ7J2EIOyXsOqysO2VmOqzoCBfUkVTVCxTQ0xLLCBJL08sPyDtlYDsnYQg6rCB6rCBIOyVhOuRkOydtOuFuCA3LCA2LCA167KIIOyGjOy8k+yXkCDsl7DqsrDtlZjsmIDsirXri4jri6QuPC9wPg0KPHA+7ZWAIO2VoOuLueydgCDrnbzsnbTruIzrn6zrpqzrpbwg67aI65+s7JisIOuVjCDsm5DtlZjripQg64yA66GcIOuwlOq/gCDsiJgg7J6I7Iq164uI64ukLjwvcD4NCjxwPjxzdHJvbmc+7IaM7ZSE7Yq47Juo7Ja0IOykgOu5hDo8L3N0cm9uZz48L3A+DQo8cD7sm7nsl5DshJwgSFQxMzgw7J2YIEMg7L2U65OcIOyYiOygnOulvCDssL7snYQg7IiY6rCAIOyXhuyXiOyKteuLiOuLpC48L3A+DQo8cD48c3RyaWtlPuydtCBSVEMg7LmpIOq9pCDrjIDspJHsoIHsnbgg6rKDIOqwmeuNmOuNsC4g7J206rKMIOunkOydtCDrkJjrgpjsmpQ/IOyWtO2dkTwvc3RyaWtlPjwvcD4NCjxwPuunqOuVheyXkOyEnCwg642w7J207YOAIOyLnO2KuOunjOydhCDthqDrjIDroZwg7JWE65GQ7J2064W4IOudvOydtOu4jOufrOumrOuhnCDrp4zrk6Tsl4jsirXri4jri6QuPC9wPg0KPGJsb2NrcXVvdGU+7JWE65GQ7J2064W4IOudvOydtOu4jOufrOumrOuTpOydgCDqtIDroYDsoIHsnLzroZwgY3Bw7J2EIOyCrOyaqe2VmOuNlOq1sOyalCEg7KeE7KecIE9PUCEhICtfKzwvYmxvY2txdW90ZT4NCjxwPkhUMTM4MCDslYTrkZDsnbTrhbgg65287J2067iM65+s66as66W8IDxhIGhyZWY9XFwmcXVvdDtodHRwOi8vd2ViLnN1YXBhcGEubmV0OjgwODAvc3ZuL0FyZHVpbm9MaWJyYXJpZXMvSFQxMzgwXFwmcXVvdDs+U1ZOIOyggOyepeyGjDwvYT7sl5DshJwg67Cb7JWELCAmcXVvdDvslYTrkZDsnbTrhbggU1cg7Y+0642UIOuwkeydmCBoYXJkd2FyZS9saWJyYXJpZXMvSFQxMzgwJnF1b3Q77JeQIOyEpOy5mCjrs7Xsgqwp7ZWp64uI64ukLjwvcD4NCjx1bD4NCiAgICA8bGk+PHN0cm9uZz48YSB0YXJnZXQ9XFwmcXVvdDtfYmxhbmtcXCZxdW90OyBocmVmPVxcJnF1b3Q7aHR0cDovL3dlYi5zdWFwYXBhLm5ldDo4MDgwL3N2bi9BcmR1aW5vTGlicmFyaWVzL0hUMTM4MFxcJnF1b3Q7PkhUMTM4MCBMaWJyYXJ5IGZvciBBcmR1aW5vIChTVk4pIDwvYT48L3N0cm9uZz48L2xpPg0KPC91bD4NCjxwPuyVhOuRkOydtOuFuCDshoztlITtirjsm6jslrTrpbwg7Iuk7ZaJ7ZWgIOuVjCDshKTsuZjrkJwg65287J2067iM65+s66as66W8IOy7tO2MjOydvO2VmOyXrCDsmKTruIzsoJ3tirgoSFQxMzgwLm8p66W8IOunjOuTpOyWtCDrkaHri4jri6QuPC9wPg0KPHA+65287J2067iM65+s66as7JeQIOusuOygnOqwgCDsnojri6TrqbQg7J20IOuLqOqzhOyXkOyEnCDtmZXsnbjtlaAg7IiYIOyeiOyKteuLiOuLpC48L3A+DQo8cD48c3Ryb25nPuyLpO2WiTo8L3N0cm9uZz48L3A+DQo8cD7rnbzsnbTruIzrn6zrpqzrpbwg7ISk7LmY7ZWY66m0IOyYiOygnOuPhCDtlajqu5gg7ISk7LmYIOuQqeuLiOuLpC48L3A+DQo8cD4mcXVvdDtNZW51LSZndDtTa2V0Y2hib29rLSZndDtFeGFtcGxlcy0mZ3Q7TGlicmFyeS1IVDEzODAmcXVvdDvsnLzroZwg65Ok7Ja06rCAIOyYiOygnOulvCDrtojrn6zsmLXri4jri6QuPC9wPg0KPHA+7JiI7KCc64qUIEhUMTM4MOyXkCDsi5zqsITsnYQg7ISk7KCV7ZWY6rOgIOunpCDstIgg7Iuc66as7Ja8IOuqqOuLiO2EsOulvCDthrXtlbQg7ZiE7J6sIOyLnOqwhOydhCDrs7Tsl6wg7KSN64uI64ukLjwvcD4NCjxwPuyVhOuemOuKlCDsi6Ttlokg7ZmU66m0LjwvcD4NCjxwPjxpbWcgd2lkdGg9XFwmcXVvdDs0MjBcXCZxdW90OyBoZWlnaHQ9XFwmcXVvdDs1MDRcXCZxdW90OyBjbGFzcz1cXCZxdW90O2ltYWdlZnJhbWVcXCZxdW90OyBhbHQ9XFwmcXVvdDthcmR1aW5vX2h0MTM4MF9leGFtcGxlLmpwZ1xcJnF1b3Q7IHNyYz1cXCZxdW90Oy93b3JkcHJlc3Mvd3AtY29udGVudC91cGxvYWRzLzIwMDgvMDgvYXJkdWlub19odDEzODBfZXhhbXBsZS5qcGdcXCZxdW90OyAvPjwvcD4NCjxwPjxzdHJvbmc+7J2R7JqpOiA8L3N0cm9uZz48L3A+DQo8cD5SVEPsnZgg7KCE7JuQ7J2EIC3qsbTsoITsp4DroZwtIOu2hOumrO2VtCDrkZDrqbQg7JWE65GQ7J2064W46rCAIOq6vOyhjOydhCDrlYzrj4Qg7Iuc6rCE7J2EIOycoOyngO2VoCDsiJgg7J6I7Iq164uI64ukLjwvcD4NCjxwPuyYiOyghOyXkCDshozqsJztlZwg7J247YSw67KMIO2KuOumrOqxsOydmCDsnbjthLDrsowg6rCE6rKp7J2EIOydvC/sm5Qv64WEIOuLqOychOuhnCDtmZXsnqXtlaAg7IiY64+EIOyeiOqyoOuEpOyalC48L3A+IjtzOjEwOiJwb3N0X3RpdGxlIjtzOjM1OiJSZWFsIFRpbWUgQ2xvY2sgSFQxMzgwIHdpdGggQXJkdWlubyI7fX0=";}'
dsq_thread_id:
  - 722490452
aktt_notify_twitter:
  - no
categories:
  - Arduino
  - MyProject
tags:
  - ArduinoLibrary

---
사실, 아두이노가 저렴한 이유는 주변장치들이 없기 때문입니다.  
국내에서 판매되는 AVR 개발 보드들은 센서며, 스위치며, CLCD등을  
주렁 주렁 달아 덩치가 크고 비싸죠.  
뭐, 삽질할 거리가 줄어들 수도 있겠지만,  
삽질 할 수 없게 만들어 버리는 그런건 제 취향은 아니에요.

사실, 아두이노만으로는 (13번 LED를 깜박이는 걸 제외하고) 거의 아무것도 할 게 없습니다.  
이제, 아두이노에 주변장치를 달아 보겠습니다.

임베디드 세상의 Hello world격 어플리케이션은 I2C로 통신하는  
[RTC](http://www.terms.co.kr/RTC.htm)를 연결하는 것 입니다.  
I2C프로토콜은 널리 사용되는 표준 중 하나로, 알아두면 두고두고  
유용하며, RTC는 싸고 간단한 장치이므로 배우기에 좋습니다.

그래서, RTC칩 HT1380을 구입했는데, 판매 페이지의 설명과 달리 이 녀석이  
I2C 프로토콜로 통신을 하지 않더군요. 🙁

> 틀렸다고 알려줘도 고치치도 않고, eleparts 잊지 않겠다. -_-+

그럼 I2C가 아닌 RTC를 아두이노에 연결해 보겠습니다. HT1380은 세 선을 사용해 MCU와 통신 합니다. 데이타 시트를 기초로 구현!ㄱㄱㅅ!

> 버릴수는 없잖아요.

<!--more-->

\## 하드웨어 준비:

![](https://homin.dev/asset/blog/2008/08/ht1380_parts.jpg)

&#8211; [Serial Time Keeper IC (HT1380)](https://www.eleparts.co.kr/view.php?cate1=&cate2=&cate3=&cate4=&item=10689&keyword=&u_n=25560&page=1)
&#8211; [Tuning Fork -32.768KHz](https://www.eleparts.co.kr/view.php?cate1=&cate2=&cate3=&cate4=&item=7537&keyword=&u_n=25560&page=1)
&#8211; [Ceramic 5pF, 50V](https://www.eleparts.co.kr/view.php?cate1=&cate2=&cate3=&cate4=&item=856&keyword=&u_n=25560&page=1)

[데이터시트](http://www.alldatasheet.co.kr/datasheet-pdf/pdf_kor/64412/HOLTEK/HT1380.html)
의 회로도를 참고하여 조립.

\## 휘리릭 뿅!:

![](https://homin.dev/asset/blog/2008/08/ht1380_module.jpg)

아두이노의 5V전원을 연결하고 \`_REST\`, \`SCLK\`, \`I/O\`,? 핀을 각각 아두이노  
7, 6, 5번 소켓에 연결하였습니다.  
핀 할당은 라이브러리를 불러올 때 원하는 대로 바꿀 수 있습니다.

\## 소프트웨어 준비:

웹에서 HT1380의 C 코드 예제를 찾을 수가 없었습니다. -이 RTC 칩 꽤 대중적인 것 같던데.  
이게 말이 되나요? 어흑 &#8211; 맨땅에서, 데이타 시트만을 토대로 아두이노 라이브러리로 만들었습니다.

> 아두이노 라이브러리들은 관례적으로 cpp을 사용하더군요! 진짜 OOP!! +_+

[HT1380 아두이노 라이브러리](https://github.com/suapapa/arduino_library_ht1380)를 받아,  
아두이노 SW 폴더 밑의 \`hardware/libraries/HT1380\`에 설치(복사)합니다.

아두이노 소프트웨어(IDE)를 실행할 때 설치된 라이브러리를 컴파일하여  
오브젝트(HT1380.o)를 만들어 둡니다. 라이브러리에 문제가 있다면  
이 단계에서 확인할 수 있습니다.

\## 실행:

라이브러리를 설치하면 예제도 함께 설치 됩니다.  
\`Menu->Sketchbook->Examples->Library-HT1380\`으로 들어가 예제를 불러옵니다.

예제는 HT1380에 시간을 설정하고 매 초 시리얼 모니터를 통해 현재 시간을 보여 줍니다.  
아래는 실행 화면.

![](https://homin.dev/asset/blog/2008/08/arduino_ht1380_example.jpg)

\## 응용:

RTC의 전원을 -건전지로- 분리해 두면 아두이노가 꺼졌을 때도 시간을 유지할 수 있습니다.

예전에 소개한 인터벌 트리거의 인터벌 간격을 일/월/년 단위로 확장할 수도 있겠네요.