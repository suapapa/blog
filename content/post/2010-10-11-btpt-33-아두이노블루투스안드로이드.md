---
title: '[BTPT 3/3] 아두이노+블루투스+안드로이드'
author: suapapa
type: post
date: 2010-10-11T08:01:06+00:00
url: /p=474
dsq_thread_id:
  - 722489336
translations:
  - 'a:1:{i:0;s:5740:"YToxOntzOjI6ImtvIjthOjI6e3M6MTA6InBvc3RfdGl0bGUiO3M6NTI6IltCVFBUIDMvM10g7JWE65GQ7J2064W4K+u4lOujqO2IrOyKpCvslYjrk5zroZzsnbTrk5wiO3M6MTI6InBvc3RfY29udGVudCI7czo0MTc0OiI8cD4mbmJzcDs8aW1nIGhlaWdodD1cXCZxdW90OzI4MFxcJnF1b3Q7IGFsdD1cXCZxdW90O1xcJnF1b3Q7IHdpZHRoPVxcJnF1b3Q7NDIwXFwmcXVvdDsgc3JjPVxcJnF1b3Q7aHR0cDovL3dlYi5zdWFwYXBhLm5ldDo4MDgwL3dvcmRwcmVzcy93cC1jb250ZW50L3VwbG9hZHMvaW1hZ2UvYnRwdF9ydW4uanBnXFwmcXVvdDsgLz48L3A+DQo8cD7qt7jrn7wg66y07ISg7Jy866GcIOyhsOyihe2VtCDrs7TqsqDsirXri4jri6QuIOqzoOqzoOqzoH4gOik8L3A+DQo8cD48IS0tbW9yZS0tPuu4lOujqO2IrOyKpCDrqqjrk4jsnYQg67aZ7JeI7KeA66eMLCDslYTrkZDsnbTrhbgg7J6F7J6l7JeQ7ISc64qUIOq3uOuDpSDsi5zrpqzslrzroZwg642w7J207YSw6rCAIOuTpOyWtOyYpOuKlCDqsoPsnbTrr4DroZwsIO2YuOyKpO2KuCDqsozsiqTtirjqsIQg7IKs7Jqp7ZWgIOyggeygiO2VnCDtj6zrqafsnYQg66eM65Ok7Ja0IOu0pOyKteuLiOuLpC48L3A+DQo8YmxvY2txdW90ZT4NCjxwPiNNJmx0O+yijC3rsKntlqUmZ3Q7Jmx0O+yasC3rsKntlqUmZ3Q7W+yijC3sho3rj4RdW+yasC3sho3rj4RdPC9wPg0KPC9ibG9ja3F1b3RlPg0KPHA+64uk66W4IOuqheugueuTpOqzvCDqtazrtoTtlZjquLAg7JyE7ZW0ICNN7Jy866GcIOyLnOyeke2VmOqzoCwg67Cp7Zal7J2AIOyghOynhCwg7ZuE7KeELCDsoJXsp4Dsl5AgXFxcJ0ZcXFwnLCBcXFwnQlxcXCcsIFxcXCdTXFxcJyDsho3rj4TripQgMH4yNTXquYzsp4AgY2hhcuydmCDrspTsnIQg6rCS7Jy866GcIOyghOuLrO2VmOyYgOyKteuLiOuLpC4g7JiI66W8IOuTpOuptCw8L3A+DQo8dWw+DQogICAgPGxpPuyghOyGjeugpSDsoITsp4Q6ICNNRkZcXFxceGZmXFxcXHhmZjwvbGk+DQogICAgPGxpPuyijCDtmozsoIQ6ICNNQkZcXFxceGZmXFxcXHhmZjwvbGk+DQogICAgPGxpPuygleyngDogI01TUzwvbGk+DQo8L3VsPg0KPHA+DQo8bWV0YSBjb250ZW50PVxcJnF1b3Q7dGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04XFwmcXVvdDsgaHR0cC1lcXVpdj1cXCZxdW90O2NvbnRlbnQtdHlwZVxcJnF1b3Q7IC8+7ZW07IScIDN+NeuwlOydtO2KuOydmCDrqoXroLnsnbQg7IKs7Jqp65Cp64uI64ukLjwvcD4NCjxwPuydtOygnCDsobDsooXquLAuJm5ic3A767iU66Oo7Yis7IqkIOuqqOuTiOydgCBTUFAg7ZSE66Gc7Yag7L2c7J20IOyYrOudvOqwgCDsnojripQg6rKD7Jy866GcIFNQUO2UhOuhnO2GoOy9nOydhCDsgqzsmqntlaAg7IiYIOyeiOuKlCDtmLjsiqTtirjqsIAg7ZWE7JqU7ZWp64uI64ukLjwvcD4NCjxwPuu4lOujqO2IrOyKpCDrj5nquIDsnbQg64us66awIOuFuO2KuOu2gS9QQ+uCmCA8c3BhbiBzdHlsZT1cXCZxdW90O2NvbG9yOiByZ2IoMjU1LDAsMClcXCZxdW90Oz48c3Ryb25nPuyViOuTnOuhnOydtOuTnCDtj7A8L3N0cm9uZz48L3NwYW4+7JeQ7IScIFNQUO2UhOuhnO2GoOy9nOydhCDsp4Dsm5Dtlanri4jri6QuICjslYTsnbTtj7DsnYAgU1BQIOyngOybkOydtCDslYjrkJzri6TrhKTsmpQpPC9wPg0KPHA+7JWI65Oc66Gc7J2065OcIHNka+yXkOyEnCDruYTsirftlZwg7JiI7KCcIEJsdWV0b290aENoYXTsnYQg7LC+7JWEIOyggeuLue2eiCDsiJjsoJXtlbQg7Luo7Yq466GkIOyVseydhCDrp4zrk6Tsl4jsirXri4jri6QuJm5ic3A7PC9wPg0KPHA+67iU66Oo7Yis7IqkIOyGjOy8k+ydhCDrp4zrk6Qg65WMIFVVSUTrpbwg64Sj7Ja07KO86rKMIOuQmOyWtCDsnojripTrjbAsIOydtOuKlCBTUFDqsIAg67KU7Jqp7Jy866GcIOyTsOydtOq4sCDrlYzrrLjsl5Ag7ISc66GcIOyVveyGjeuQnCBVVUlE64G866as66eMIOygkeyGjeydtCDrkJjqsowg7ZWY6riwIOychO2VnCDqsoPsnLzroZwg67O07J6F64uI64ukLiDssYTtjIUg7ZSE66Gc6re4656o7Jy866GcIO2Dse2BrOyXkCDrp4kg7KCR7IaN7ZWgIOyImCDsnojri6TrqbQg6rOk656A7ZWY6rKg7KOgLjwvcD4NCjxwPlVVSUTripQg7Ju57JeQ7IScIFVVSUQg7IOd7ISx6riw66W8IOyCrOyaqe2VtCDslYTrrLQg7YKk64KYIOunjOuTpOyWtCDsk7DripTrjbAuLiDsp4DquIgg7LKY65+8IOuylOyaqSBTUFAg66qo65OI7J2EIOyCrOyaqe2VmOuKlCDqsr3smrDsl5DripQg64uk7J2M7J2YIFVVSUTrpbwg7I2o7JW8IO2VmOuEpOyalC48L3A+DQo8YmxvY2txdW90ZT4NCjxwPjAwMDAxMTAxLTAwMDAtMTAwMC04MDAwLTAwODA1RjlCMzRGQjwvcD4NCjwvYmxvY2txdW90ZT4NCjxwPuygnOqwgCDrp4zrk6Ag7KCE7LK0IOy9lOuTnOuKlCDri6TsnYwg66eB7YGs65Ok7JeQIOyeiOyKteuLiOuLpC4gKHN2bikmbmJzcDvrlLEg7KCE7ZuEIOyijOyasCDqtazrj5nrp4wg65CY6rKMIOunjOuToCDsg4Htg5zrnbwg67OEIOyYge2WpeqwgOuKlCDsl4bsirXri4jri6QuIDopPC9wPg0KPHA+DQo8bWV0YSBjb250ZW50PVxcJnF1b3Q7dGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04XFwmcXVvdDsgaHR0cC1lcXVpdj1cXCZxdW90O2NvbnRlbnQtdHlwZVxcJnF1b3Q7IC8+PC9wPg0KPHVsPg0KICAgIDxsaT48YSBocmVmPVxcJnF1b3Q7aHR0cDovL3dlYi5zdWFwYXBhLm5ldDo4MDgwL3N2bi9IVy9QaW5rVGFuay9hcmR1aW5vL3Bpbmt0YW5rXFwmcXVvdDs+7JWE65GQ7J2064W4IOuztOuTnCDsiqTsvIDsuZgg7IaM7IqkPC9hPjwvbGk+DQogICAgPGxpPjxhIGhyZWY9XFwmcXVvdDtodHRwOi8vd2ViLnN1YXBhcGEubmV0OjgwODAvc3ZuL0hXL1BpbmtUYW5rL2FuZHJvaWQvVGFua0NvblxcJnF1b3Q7PuyViOuTnOuhnOydtOuTnCDsu6jtirjroaQg7JWxIOyGjOyKpDwvYT48L2xpPg0KPC91bD4NCjxkaXY+6re465+8IOuPmeyYgeyDgSDrk6TslrTqsJHri4jri6QuPC9kaXY+DQo8ZGl2Pg0KPG1ldGEgY29udGVudD1cXCZxdW90O3RleHQvaHRtbDsgY2hhcnNldD11dGYtOFxcJnF1b3Q7IGh0dHAtZXF1aXY9XFwmcXVvdDtjb250ZW50LXR5cGVcXCZxdW90OyAvPlt5b3V0dWJlOmh0dHA6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj01SkFCdGZndEtEb108L2Rpdj4NCjxkaXY+66y07ZWc6rak64+E6rCAIOyemCDruaDsp4DripQg66y47KCc6rCAIOyeiOyXiOuKlOuNsCDqtazrj5nstpXsl5Ag67aZ7Ja07J6I64qUIOuNnOuggeuMgOuNmCDrsJTtgLTrpbwg7JeQ7Y+t7IucIOygkeywqeygnOuhnCDrlqEg67aZ7JesIOuyhOumrOuLiCDtlbTqsrDrkJjsl4jsirXri4jri6QuIDopPC9kaXY+DQo8ZGl2PiZuYnNwOzwvZGl2Pg0KPGRpdj7slbzsmbgg6rWs64+ZIOuPmeyYgeyDgS48L2Rpdj4NCjxkaXY+DQo8bWV0YSBjb250ZW50PVxcJnF1b3Q7dGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04XFwmcXVvdDsgaHR0cC1lcXVpdj1cXCZxdW90O2NvbnRlbnQtdHlwZVxcJnF1b3Q7IC8+W3lvdXR1YmU6aHR0cDovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PXRGd1ZJWXlJS1BNXTwvZGl2Pg0KPGRpdj7rgoTrgoTrgoR+IOydtOqxsCDsoJXrp5Ag7J6s66+47J6I64Sk7JqULjwvZGl2Pg0KPGRpdj7qu43rjbDquLDrpbwg7JSM7Jqw66m0IOustO2VnOq2pOuPhOqwgCDsiqTsu6Ttirjsl5Ag64u/7JWE7IScIOyemCDslYjqtazrpbTripQg66y47KCc6rCAIOyeiOyKteuLiOuLpC4g662QIOyWtOypjOqyoOyWtOyalCDsnbTrr7gg7J287Ja064KcIOydvOyduOuNsCDjhYs8L2Rpdj4NCjxkaXY+Jm5ic3A7PC9kaXY+DQo8ZGl2PuyekCDqt7jrn7wg7IaM7JqUIOu5hOyaqSDshozqsJztlbQg65Oc66as6rKg7Iq164uI64ukLiDquLDslrXsl5Ag7J2Y7ZWcIOqxsOudvCjqsr3soJwg6rCc64WQIOyVve2VqCkg66eO7J20IO2LgOumtCDsiJjrj4Qg7J6I7Ja07JqULiDrjIDrnrXsoIHsnbgg6rCA6rKpIOyeheuLiOuLpC48L2Rpdj4NCjx1bD4NCiAgICA8bGk+7JWE7Lm0642w66+4IDEvMzUg7YOx7YGsIC0gMuunjOybkDwvbGk+DQogICAgPGxpPuu4lOujqO2IrOyKpOuqqOuTiCAtIDPrp4zsm5A8L2xpPg0KICAgIDxsaT7slYTrkZDsnbTrhbjrs7Trk5zsmYAg67aA7ZKI67mEIC0gMeunjOybkDwvbGk+DQogICAgPGxpPu2Vke2BrOyDiSDsiqTtlITroIjsnbQgLSAy66eM7JuQIC1fLTs8L2xpPg0KPC91bD4NCjxwPu2VmOuCmCDrjZQg66eM65Ok7Ja0IOuztOqzoCDsi7bsnYDrjbAgKOq3uOufvCDrjZQg7Iu46rKMIOyemOunjOuTpCDsiJgg7J6I7J2E7YWQ642wKSDrkZjsp7gg7YKk7Jqw64qQ6528IOuwlOu5oOyEnCDslrjsoJzqsIAg65Cg7KeA64qUIOuqqOultOqyoOyKteuLiOuLpC4gOik8L3A+Ijt9fQ==";}'
categories:
  - android
  - Arduino
  - MyProject
tags:
  - 블루투스
  - 아두이노
  - 안드로이드
  - 프라모델

---
&nbsp;<img loading="lazy" height="280" alt="" width="420" src="https://homin.dev/asset/suapapa-blog/wp-content_uploads/image/btpt_run.jpg" />

그럼 무선으로 조종해 보겠습니다. 고고고~ 🙂

<!--more-->블루투스 모듈을 붙었지만, 아두이노 입장에서는 그냥 시리얼로 데이터가 들어오는 것이므로, 호스트 게스트간 사용할 적절한 포멧을 만들어 봤습니다.

> #M<좌-방향><우-방향>\[좌-속도\]\[우-속도\]

다른 명령들과 구분하기 위해 #M으로 시작하고, 방향은 전진, 후진, 정지에 &#8216;F&#8217;, &#8216;B&#8217;, &#8216;S&#8217; 속도는 0~255까지 char의 범위 값으로 전달하였습니다. 예를 들면,

  * 전속력 전진: #MFF\xff\xff
  * 좌 회전: #MBF\xff\xff
  * 정지: #MSS

<meta content="text/html; charset=utf-8" http-equiv="content-type" />
해서 3~5바이트의 명령이 사용됩니다.

이제 조종기.&nbsp;블루투스 모듈은 SPP 프로토콜이 올라가 있는 것으로 SPP프로토콜을 사용할 수 있는 호스트가 필요합니다.

블루투스 동글이 달린 노트북/PC나 <span style="color: rgb(255,0,0)"><strong>안드로이드 폰</strong></span>에서 SPP프로토콜을 지원합니다. (아이폰은 SPP 지원이 안된다네요)

안드로이드 sdk에서 비슷한 예제 BluetoothChat을 찾아 적당히 수정해 컨트롤 앱을 만들었습니다.&nbsp;

블루투스 소켓을 만들 때 UUID를 넣어주게 되어 있는데, 이는 SPP가 범용으로 쓰이기 때문에 서로 약속된 UUID끼리만 접속이 되게 하기 위한 것으로 보입니다. 채팅 프로그램으로 탱크에 막 접속할 수 있다면 곤란하겠죠.

UUID는 웹에서 UUID 생성기를 사용해 아무 키나 만들어 쓰는데.. 지금 처럼 범용 SPP 모듈을 사용하는 경우에는 다음의 UUID를 써야 하네요.

> 00001101-0000-1000-8000-00805F9B34FB

제가 만든 전체 코드는 다음 링크들에 있습니다. (svn)&nbsp;딱 전후 좌우 구동만 되게 만든 상태라 별 영향가는 없습니다. 🙂

<meta content="text/html; charset=utf-8" http-equiv="content-type" />


  * [아두이노 보드 스케치 소스][1]
  * [안드로이드 컨트롤 앱 소스][2]

<div>
  그럼 동영상 들어갑니다.
</div>

<div>
  <meta content="text/html; charset=utf-8" http-equiv="content-type" />
  [youtube:http://www.youtube.com/watch?v=5JABtfgtKDo]
</div>

<div>
  무한궤도가 잘 빠지는 문제가 있었는데 구동축에 붙어있는 덜렁대던 바퀴를 에폭시 접착제로 떡 붙여 버리니 해결되었습니다. 🙂
</div>

<div>
  &nbsp;
</div>

<div>
  야외 구동 동영상.
</div>

<div>
  <meta content="text/html; charset=utf-8" http-equiv="content-type" />
  [youtube:http://www.youtube.com/watch?v=tFwVIYyIKPM]
</div>

<div>
  낄낄낄~ 이거 정말 재미있네요.
</div>

<div>
  껍데기를 씌우면 무한궤도가 스커트에 닿아서 잘 안구르는 문제가 있습니다. 뭐 어쩌겠어요 이미 일어난 일인데 ㅋ
</div>

<div>
  &nbsp;
</div>

<div>
  자 그럼 소요 비용 소개해 드리겠습니다. 기억에 의한 거라(경제 개념 약함) 많이 틀릴 수도 있어요. 대략적인 가격 입니다.
</div>

  * 아카데미 1/35 탱크 &#8211; 2만원
  * 블루투스모듈 &#8211; 3만원
  * 아두이노보드와 부품비 &#8211; 1만원
  * 핑크색 스프레이 &#8211; 2만원 -_-;

하나 더 만들어 보고 싶은데 (그럼 더 싸게 잘만들 수 있을텐데) 둘째 키우느라 바빠서 언제가 될지는 모르겠습니다. 🙂

 [1]: https://homin.dev/svn/HW/PinkTank/arduino/pinktank
 [2]: https://homin.dev/svn/HW/PinkTank/android/TankCon